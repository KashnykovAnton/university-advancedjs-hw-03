{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_8BYxyTJHbFSLtHvZZzKDtoom5iyPRWRxrthff4D5ynGW8xRKmOas3GkZRdFsAyUP';\nconst BASE_URL = 'https://api.thecatapi.com/v1';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nfunction fetchBreeds() {\n  return axios(`${BASE_URL}/breeds`);\n}\n\nfunction fetchCatByBreed(id) {\n  return axios(`${BASE_URL}/images/search?breed_ids=${id}`);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import iziToast from 'izitoast';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  div: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader-wrapper'),\n};\n\nwindow.addEventListener('load', onWindowLoad);\nrefs.select.addEventListener('change', onSelectChange);\n\nfunction onWindowLoad() {\n  toggleLoader();\n  fetchBreeds()\n    .then(({ data }) => {\n      createOptionsMarkup(data);\n    })\n    .catch(err => showErrorToast(err.message))\n    .finally(() => {\n      toggleLoader();\n    });\n}\n\nfunction createOptionsMarkup(arr) {\n  refs.select.classList.remove('hide');\n  arr.map(({ id, name }) => {\n    const markup = `<option value=${id}>${name}</option>`;\n    renderMarkup('select', markup);\n  });\n}\n\nfunction onSelectChange(e) {\n  e.preventDefault();\n  refs.div.innerHTML = '';\n  toggleLoader();\n  fetchCatByBreed(e.target.value)\n    .then(({ data }) => createCatInfoMarkup(data))\n    .catch(err => showErrorToast(err.message))\n    .finally(() => toggleLoader());\n}\n\nfunction createCatInfoMarkup(data) {\n  const { breeds, url } = data[0];\n  const { description, name, temperament } = breeds[0];\n  const markup = `<img src=${url} alt=${name}/>\n  <div>\n    <h2>${name}</h2>\n    <p>${description}</p>\n    <p><b>Temperament: </b>${temperament}</p>\n  </div>`;\n  renderMarkup('div', markup);\n}\n\nfunction showErrorToast(text) {\n  const markup = `<strong>Oops! Something went wrong! Try reloading the page!</strong> </br> ${text}`;\n  iziToast.error({\n    message: markup,\n    position: 'topCenter',\n  });\n}\n\nfunction toggleLoader() {\n  refs.loader.classList.toggle('hide');\n}\n\nfunction renderMarkup(tag, markup) {\n  refs[tag].insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["API_KEY","BASE_URL","axios","fetchBreeds","fetchCatByBreed","id","refs","onWindowLoad","onSelectChange","toggleLoader","data","createOptionsMarkup","err","showErrorToast","arr","name","markup","renderMarkup","e","createCatInfoMarkup","breeds","url","description","temperament","text","iziToast","tag"],"mappings":"6vBAEA,MAAMA,EACJ,wEACIC,EAAW,+BAEjBC,EAAM,SAAS,QAAQ,OAAO,aAAeF,EAE7C,SAASG,GAAc,CACrB,OAAOD,EAAM,GAAGD,UAAiB,CACnC,CAEA,SAASG,EAAgBC,EAAI,CAC3B,OAAOH,EAAM,GAAGD,6BAAoCI,GAAI,CAC1D,CCXA,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,IAAK,SAAS,cAAc,WAAW,EACvC,OAAQ,SAAS,cAAc,iBAAiB,CAClD,EAEA,OAAO,iBAAiB,OAAQC,CAAY,EAC5CD,EAAK,OAAO,iBAAiB,SAAUE,CAAc,EAErD,SAASD,GAAe,CACtBE,IACAN,EAAa,EACV,KAAK,CAAC,CAAE,KAAAO,KAAW,CAClBC,EAAoBD,CAAI,CAC9B,CAAK,EACA,MAAME,GAAOC,EAAeD,EAAI,OAAO,CAAC,EACxC,QAAQ,IAAM,CACbH,GACN,CAAK,CACL,CAEA,SAASE,EAAoBG,EAAK,CAChCR,EAAK,OAAO,UAAU,OAAO,MAAM,EACnCQ,EAAI,IAAI,CAAC,CAAE,GAAAT,EAAI,KAAAU,CAAI,IAAO,CACxB,MAAMC,EAAS,iBAAiBX,KAAMU,aACtCE,EAAa,SAAUD,CAAM,CACjC,CAAG,CACH,CAEA,SAASR,EAAeU,EAAG,CACzBA,EAAE,eAAc,EAChBZ,EAAK,IAAI,UAAY,GACrBG,IACAL,EAAgBc,EAAE,OAAO,KAAK,EAC3B,KAAK,CAAC,CAAE,KAAAR,CAAM,IAAKS,EAAoBT,CAAI,CAAC,EAC5C,MAAME,GAAOC,EAAeD,EAAI,OAAO,CAAC,EACxC,QAAQ,IAAMH,EAAY,CAAE,CACjC,CAEA,SAASU,EAAoBT,EAAM,CACjC,KAAM,CAAE,OAAAU,EAAQ,IAAAC,CAAK,EAAGX,EAAK,GACvB,CAAE,YAAAY,EAAa,KAAAP,EAAM,YAAAQ,CAAW,EAAKH,EAAO,GAC5CJ,EAAS,YAAYK,SAAWN;AAAA;AAAA,UAE9BA;AAAA,SACDO;AAAA,6BACoBC;AAAA,UAE3BN,EAAa,MAAOD,CAAM,CAC5B,CAEA,SAASH,EAAeW,EAAM,CAC5B,MAAMR,EAAS,8EAA8EQ,IAC7FC,EAAS,MAAM,CACb,QAAST,EACT,SAAU,WACd,CAAG,CACH,CAEA,SAASP,GAAe,CACtBH,EAAK,OAAO,UAAU,OAAO,MAAM,CACrC,CAEA,SAASW,EAAaS,EAAKV,EAAQ,CACjCV,EAAKoB,GAAK,mBAAmB,YAAaV,CAAM,CAClD"}