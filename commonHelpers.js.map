{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY =\n  'live_8BYxyTJHbFSLtHvZZzKDtoom5iyPRWRxrthff4D5ynGW8xRKmOas3GkZRdFsAyUP';\nconst BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst SEARCH_URL = 'https://api.thecatapi.com/v1/images/search?breed_ids=';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  div: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n};\n\n// console.log('BEFORE: ', refs.loader);\n// refs.loader.classList.add('hide');\n// console.dir('AFTER: ', refs.loader.classList);\n\nfunction fetchBreeds() {\n  axios.defaults.headers.common['x-api-key'] = API_KEY;\n  return axios(BASE_URL)\n    .then(({ data }) => createOptionsMarkup(data))\n    .catch(err => showErrorToast(err.message));\n}\n\nfetchBreeds();\n\nfunction createOptionsMarkup(arr) {\n  console.log(arr.length);\n  arr.map(({ id, name }) => {\n    const markup = `<option value=${id}>${name}</option>`;\n    refs.select.insertAdjacentHTML('beforeend', markup);\n  });\n}\n\nrefs.select.addEventListener('change', onSelectChange);\n\nfunction onSelectChange(e) {\n  e.preventDefault();\n  fetchCatByBreed(e.target.value);\n}\n\nfunction fetchCatByBreed(breedId) {\n  refs.loader.style.removeProperty('display');\n  axios.defaults.headers.common['x-api-key'] = API_KEY;\n  return axios(SEARCH_URL + breedId)\n    .then(({ data }) => createCatInfoMarkup(data))\n    .catch(err => showErrorToast(err.message));\n}\n\nfunction createCatInfoMarkup(data) {\n  console.log(...data);\n  const { breeds, url } = data[0];\n  const { description, name, temperament } = breeds[0];\n  const markup = `<img src=${url} alt=${name}/>\n  <div>\n    <h2>${name}</h2>\n    <p>${description}</p>\n    <p><b>Temperament:</b>${temperament}</p>\n  </div>`;\n  refs.div.innerHTML = markup;\n}\n\nfunction showErrorToast(text) {\n  const markup = `<strong>Oops! Something went wrong! Try reloading the page!</strong> </br> ${text}`;\n  iziToast.error({\n    message: markup,\n    position: 'topCenter',\n  });\n}\n"],"names":["API_KEY","BASE_URL","SEARCH_URL","refs","fetchBreeds","axios","data","createOptionsMarkup","err","showErrorToast","arr","id","name","markup","onSelectChange","e","fetchCatByBreed","breedId","createCatInfoMarkup","breeds","url","description","temperament","text","iziToast"],"mappings":"6vBAGA,MAAMA,EACJ,wEACIC,EAAW,sCACXC,EAAa,wDAEbC,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,IAAK,SAAS,cAAc,WAAW,EACvC,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAMA,SAASC,GAAc,CACrB,OAAAC,EAAM,SAAS,QAAQ,OAAO,aAAeL,EACtCK,EAAMJ,CAAQ,EAClB,KAAK,CAAC,CAAE,KAAAK,CAAM,IAAKC,EAAoBD,CAAI,CAAC,EAC5C,MAAME,GAAOC,EAAeD,EAAI,OAAO,CAAC,CAC7C,CAEAJ,IAEA,SAASG,EAAoBG,EAAK,CAChC,QAAQ,IAAIA,EAAI,MAAM,EACtBA,EAAI,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAI,IAAO,CACxB,MAAMC,EAAS,iBAAiBF,KAAMC,aACtCT,EAAK,OAAO,mBAAmB,YAAaU,CAAM,CACtD,CAAG,CACH,CAEAV,EAAK,OAAO,iBAAiB,SAAUW,CAAc,EAErD,SAASA,EAAeC,EAAG,CACzBA,EAAE,eAAc,EAChBC,EAAgBD,EAAE,OAAO,KAAK,CAChC,CAEA,SAASC,EAAgBC,EAAS,CAChC,OAAAd,EAAK,OAAO,MAAM,eAAe,SAAS,EAC1CE,EAAM,SAAS,QAAQ,OAAO,aAAeL,EACtCK,EAAMH,EAAae,CAAO,EAC9B,KAAK,CAAC,CAAE,KAAAX,CAAM,IAAKY,EAAoBZ,CAAI,CAAC,EAC5C,MAAME,GAAOC,EAAeD,EAAI,OAAO,CAAC,CAC7C,CAEA,SAASU,EAAoBZ,EAAM,CACjC,QAAQ,IAAI,GAAGA,CAAI,EACnB,KAAM,CAAE,OAAAa,EAAQ,IAAAC,CAAK,EAAGd,EAAK,GACvB,CAAE,YAAAe,EAAa,KAAAT,EAAM,YAAAU,CAAW,EAAKH,EAAO,GAC5CN,EAAS,YAAYO,SAAWR;AAAA;AAAA,UAE9BA;AAAA,SACDS;AAAA,4BACmBC;AAAA,UAE1BnB,EAAK,IAAI,UAAYU,CACvB,CAEA,SAASJ,EAAec,EAAM,CAC5B,MAAMV,EAAS,8EAA8EU,IAC7FC,EAAS,MAAM,CACb,QAASX,EACT,SAAU,WACd,CAAG,CACH"}